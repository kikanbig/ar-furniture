<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üö® Emergency Test - –¢–µ—Å—Ç –∫–Ω–æ–ø–æ–∫</title>
    <meta http-equiv="cache-control" content="no-cache, no-store, must-revalidate">
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #000;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .test-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a5a);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 10px;
            margin: 10px;
            cursor: pointer;
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 10px auto;
        }
        
        .test-btn:active {
            transform: scale(0.95);
        }
        
        .log {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>üö® –≠–ö–°–¢–†–ï–ù–ù–´–ô –¢–ï–°–¢ –ö–ù–û–ü–û–ö</h1>
    <p>–í–µ—Ä—Å–∏—è: <span id="version">EMERGENCY v1.0</span></p>
    
    <!-- –¢–ï–°–¢ 1: –û–±—ã—á–Ω—ã–π onclick -->
    <button class="test-btn" onclick="test1()">
        üì± –¢–ï–°–¢ 1: onclick Alert
    </button>
    
    <!-- –¢–ï–°–¢ 2: addEventListener -->
    <button id="test2-btn" class="test-btn">
        üéØ –¢–ï–°–¢ 2: addEventListener Alert
    </button>
    
    <!-- –¢–ï–°–¢ 3: –ü—Ä–æ—Å—Ç–∞—è –∫–∞–º–µ—Ä–∞ -->
    <button id="test3-btn" class="test-btn">
        üì∑ –¢–ï–°–¢ 3: –ü—Ä–æ—Å—Ç–∞—è –∫–∞–º–µ—Ä–∞
    </button>
    
    <!-- –¢–ï–°–¢ 4: –ö–∞–º–µ—Ä–∞ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º -->
    <button id="test4-btn" class="test-btn">
        üîç –¢–ï–°–¢ 4: –ö–∞–º–µ—Ä–∞ + –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
    </button>
    
    <div id="log" class="log">
        üìù –õ–û–ì –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:<br>
        ‚è∞ <span id="timestamp"></span><br>
        üåê URL: <span id="current-url"></span><br>
        üì± User Agent: <span id="user-agent"></span><br>
        üîí HTTPS: <span id="https-status"></span><br>
        ---<br>
    </div>
    
    <video id="video" style="width: 100%; max-width: 400px; display: none; border-radius: 10px; margin-top: 20px;"></video>

    <!-- –û–ë–´–ß–ù–´–ô JAVASCRIPT –ë–ï–ó MODULES -->
    <script>
        // –ù–∞—á–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        document.getElementById('timestamp').textContent = new Date().toLocaleString('ru-RU');
        document.getElementById('current-url').textContent = window.location.href;
        document.getElementById('user-agent').textContent = navigator.userAgent;
        document.getElementById('https-status').textContent = location.protocol === 'https:' ? '–î–∞ ‚úÖ' : '–ù–µ—Ç ‚ùå';
        
        const log = document.getElementById('log');
        
        function addLog(message) {
            console.log(message);
            log.innerHTML += message + '<br>';
            log.scrollTop = log.scrollHeight;
        }
        
        // –¢–ï–°–¢ 1: –û–±—ã—á–Ω—ã–π onclick
        function test1() {
            addLog('‚úÖ –¢–ï–°–¢ 1 –†–ê–ë–û–¢–ê–ï–¢: onclick —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑–≤–∞–Ω–∞!');
            alert('üéâ –¢–ï–°–¢ 1: onclick —Ä–∞–±–æ—Ç–∞–µ—Ç!');
        }
        
        // –¢–ï–°–¢ 2: addEventListener
        document.addEventListener('DOMContentLoaded', function() {
            addLog('üîß DOMContentLoaded: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ addEventListener...');
            
            const test2Btn = document.getElementById('test2-btn');
            if (test2Btn) {
                test2Btn.addEventListener('click', function() {
                    addLog('‚úÖ –¢–ï–°–¢ 2 –†–ê–ë–û–¢–ê–ï–¢: addEventListener —Å—Ä–∞–±–æ—Ç–∞–ª!');
                    alert('üéâ –¢–ï–°–¢ 2: addEventListener —Ä–∞–±–æ—Ç–∞–µ—Ç!');
                });
                addLog('‚úÖ –ö–Ω–æ–ø–∫–∞ –¢–ï–°–¢ 2 –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞');
            } else {
                addLog('‚ùå –ö–Ω–æ–ø–∫–∞ –¢–ï–°–¢ 2 –ù–ï –ù–ê–ô–î–ï–ù–ê!');
            }
            
            // –¢–ï–°–¢ 3: –ü—Ä–æ—Å—Ç–∞—è –∫–∞–º–µ—Ä–∞
            const test3Btn = document.getElementById('test3-btn');
            if (test3Btn) {
                test3Btn.addEventListener('click', async function() {
                    addLog('üéØ –¢–ï–°–¢ 3: –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Å—Ç–æ–π –∫–∞–º–µ—Ä—ã...');
                    
                    try {
                        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                            throw new Error('getUserMedia –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
                        }
                        
                        addLog('üì± getUserMedia –Ω–∞–π–¥–µ–Ω, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –∫–∞–º–µ—Ä—É...');
                        
                        const stream = await navigator.mediaDevices.getUserMedia({ 
                            video: { 
                                facingMode: 'environment',
                                width: { ideal: 1280 },
                                height: { ideal: 720 }
                            } 
                        });
                        
                        addLog('‚úÖ –ö–ê–ú–ï–†–ê –ü–û–õ–£–ß–ï–ù–ê! –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∏–¥–µ–æ...');
                        
                        const video = document.getElementById('video');
                        video.srcObject = stream;
                        video.style.display = 'block';
                        video.play();
                        
                        addLog('üéâ –£–°–ü–ï–•! –ö–∞–º–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!');
                        alert('üéâ –¢–ï–°–¢ 3: –ö–∞–º–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç!');
                        
                    } catch (error) {
                        addLog('‚ùå –û–®–ò–ë–ö–ê –ö–ê–ú–ï–†–´: ' + error.message);
                        alert('‚ùå –¢–ï–°–¢ 3 –ø—Ä–æ–≤–∞–ª–µ–Ω: ' + error.message);
                    }
                });
                addLog('‚úÖ –ö–Ω–æ–ø–∫–∞ –¢–ï–°–¢ 3 –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞');
            }
            
            // –¢–ï–°–¢ 4: –ö–∞–º–µ—Ä–∞ —Å –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π
            const test4Btn = document.getElementById('test4-btn');
            if (test4Btn) {
                test4Btn.addEventListener('click', async function() {
                    addLog('üîç –¢–ï–°–¢ 4: –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞...');
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ API
                    addLog('üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ API –ø–æ–¥–¥–µ—Ä–∂–∫–∏:');
                    addLog('  ‚Ä¢ navigator.mediaDevices: ' + (navigator.mediaDevices ? '‚úÖ' : '‚ùå'));
                    addLog('  ‚Ä¢ getUserMedia: ' + (navigator.mediaDevices?.getUserMedia ? '‚úÖ' : '‚ùå'));
                    addLog('  ‚Ä¢ navigator.xr: ' + (navigator.xr ? '‚úÖ' : '‚ùå'));
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π
                    if (navigator.permissions) {
                        try {
                            const cameraPermission = await navigator.permissions.query({ name: 'camera' });
                            addLog('üì∑ –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã: ' + cameraPermission.state);
                        } catch (e) {
                            addLog('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è: ' + e.message);
                        }
                    }
                    
                    // –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å –∫–∞–º–µ—Ä—É
                    try {
                        addLog('üé¨ –ó–∞–ø—Ä–æ—Å –∫–∞–º–µ—Ä—ã —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏...');
                        
                        const constraints = { 
                            video: { 
                                facingMode: 'environment',
                                width: { ideal: 1280, min: 640 },
                                height: { ideal: 720, min: 480 }
                            } 
                        };
                        
                        addLog('üìã Constraints: ' + JSON.stringify(constraints));
                        
                        const stream = await navigator.mediaDevices.getUserMedia(constraints);
                        
                        addLog('‚úÖ Stream –ø–æ–ª—É—á–µ–Ω!');
                        addLog('üì∫ Video tracks: ' + stream.getVideoTracks().length);
                        
                        if (stream.getVideoTracks().length > 0) {
                            const track = stream.getVideoTracks()[0];
                            addLog('üì± Track label: ' + track.label);
                            addLog('üì± Track settings: ' + JSON.stringify(track.getSettings()));
                        }
                        
                        const video = document.getElementById('video');
                        video.srcObject = stream;
                        video.style.display = 'block';
                        
                        video.onloadedmetadata = function() {
                            addLog('üì∫ Video metadata loaded: ' + video.videoWidth + 'x' + video.videoHeight);
                        };
                        
                        video.play();
                        
                        addLog('üéâ –¢–ï–°–¢ 4 –£–°–ü–ï–®–ï–ù!');
                        alert('üéâ –¢–ï–°–¢ 4: –ö–∞–º–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π!');
                        
                    } catch (error) {
                        addLog('‚ùå –û–®–ò–ë–ö–ê –í –¢–ï–°–¢–ï 4: ' + error.name + ' - ' + error.message);
                        alert('‚ùå –¢–ï–°–¢ 4 –ø—Ä–æ–≤–∞–ª–µ–Ω: ' + error.message);
                    }
                });
                addLog('‚úÖ –ö–Ω–æ–ø–∫–∞ –¢–ï–°–¢ 4 –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞');
            }
            
            addLog('üîß –í—Å–µ –∫–Ω–æ–ø–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã! –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.');
        });
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
        window.addEventListener('load', function() {
            addLog('üåç –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        });
        
        addLog('üìù JavaScript –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...');
    </script>
</body>
</html>